# üöÄ GUIA COMPLETO DE HOSPEDAGEM - Sistema Help Desk Controll IT## üìã **VIS√ÉO GERAL**Este guia cont√©m instru√ß√µes detalhadas para hospedar o Sistema Help Desk Controll IT em servidor de produ√ß√£o. O sistema √© 100% funcional e inclui frontend (HTML/CSS/JS) + backend (PHP) + banco de dados (MySQL).---## üéØ **REQUISITOS M√çNIMOS DO SERVIDOR**### **HARDWARE**- **RAM:** 2GB m√≠nimo, 4GB recomendado- **CPU:** 2 cores m√≠nimo- **Disco:** 10GB m√≠nimo (20GB recomendado)- **Rede:** Conex√£o est√°vel com SSL### **SOFTWARE**- **Sistema Operacional:** Ubuntu 20.04+ / CentOS 8+ / Debian 11+- **Servidor Web:** Apache 2.4+ ou Nginx 1.18+- **PHP:** 7.4+ (recomendado PHP 8.0+)- **Banco de Dados:** MySQL 5.7+ ou MariaDB 10.3+- **SSL:** Certificado SSL (Let's Encrypt recomendado)---## üîß **PASSO 1: PREPARAR O SERVIDOR**### **1.1 Atualizar Sistema (Ubuntu/Debian)**```bash# Atualizar sistemasudo apt update && sudo apt upgrade -y# Instalar depend√™ncias b√°sicassudo apt install curl wget unzip git -y```### **1.2 Instalar Apache**```bash# Instalar Apachesudo apt install apache2 -y# Habilitar m√≥dulos necess√°riossudo a2enmod rewritesudo a2enmod headerssudo a2enmod sslsudo a2enmod deflate# Reiniciar Apachesudo systemctl restart apache2sudo systemctl enable apache2# Verificar statussudo systemctl status apache2```### **1.3 Instalar PHP**```bash# Instalar PHP e extens√µes necess√°riassudo apt install php php-cli php-fpm php-mysql php-json php-curl php-mbstring php-openssl php-gd php-zip php-xml php-intl -y# Verificar vers√£o do PHPphp -v# Verificar extens√µes instaladasphp -m | grep -E "(mysql|json|curl|mbstring|openssl|gd|zip)"```### **1.4 Instalar MySQL**```bash# Instalar MySQLsudo apt install mysql-server -y# Configurar MySQLsudo mysql_secure_installation# Iniciar e habilitar MySQLsudo systemctl start mysqlsudo systemctl enable mysql# Verificar statussudo systemctl status mysql```---## üóÑÔ∏è **PASSO 2: CONFIGURAR BANCO DE DADOS**### **2.1 Criar Banco e Usu√°rio**```bash# Conectar ao MySQL como rootsudo mysql -u root -p# Executar comandos SQL:``````sql-- Criar banco de dadosCREATE DATABASE helpdesk_titanium CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;-- Criar usu√°rio espec√≠fico (ALTERE A SENHA!)CREATE USER 'helpdesk_user'@'localhost' IDENTIFIED BY 'SuaSenhaForte123!';-- Conceder permiss√µesGRANT ALL PRIVILEGES ON helpdesk_titanium.* TO 'helpdesk_user'@'localhost';-- Aplicar mudan√ßasFLUSH PRIVILEGES;-- Verificar cria√ß√£oSHOW DATABASES;SELECT User, Host FROM mysql.user WHERE User = 'helpdesk_user';-- Sair do MySQLEXIT;```### **2.2 Importar Estrutura do Banco**```bash# Navegar para pasta do projetocd /var/www/html/helpdesk# Importar schema do bancomysql -u helpdesk_user -p helpdesk_titanium < database/database_schema.sql# Verificar tabelas criadasmysql -u helpdesk_user -p helpdesk_titanium -e "SHOW TABLES;"```### **2.3 Inserir Dados Iniciais (Opcional)**```bash# Inserir usu√°rios de testemysql -u helpdesk_user -p helpdesk_titanium < database/test_users.sql# Verificar dados inseridosmysql -u helpdesk_user -p helpdesk_titanium -e "SELECT * FROM users;"```---## üìÅ **PASSO 3: FAZER UPLOAD DOS ARQUIVOS**### **3.1 Criar Diret√≥rio do Projeto**```bash# Criar diret√≥riosudo mkdir -p /var/www/html/helpdesk# Navegar para o diret√≥riocd /var/www/html/helpdesk```### **3.2 Upload via Git (Recomendado)**```bash# Clonar reposit√≥rio (substitua pela URL do seu reposit√≥rio)git clone https://github.com/seu-usuario/help-desk-Controll IT.git .# Ou se j√° tem o reposit√≥rio local, fazer push para o servidor```### **3.3 Upload Manual (Alternativa)**```bash# Via SCP/SFTP (do seu computador local)scp -r /caminho/para/projeto/* usuario@servidor:/var/www/html/helpdesk/# Via FTP# Use FileZilla ou similar para fazer upload de todos os arquivos```### **3.4 Configurar Permiss√µes**```bash# Definir propriet√°rio corretosudo chown -R www-data:www-data /var/www/html/helpdesk# Configurar permiss√µessudo chmod -R 755 /var/www/html/helpdesk# Criar pastas para uploads e logssudo mkdir -p /var/www/html/helpdesk/uploadssudo mkdir -p /var/www/html/helpdesk/logs# Permiss√µes especiais para uploads e logssudo chmod -R 777 /var/www/html/helpdesk/uploadssudo chmod -R 777 /var/www/html/helpdesk/logs```---## ‚öôÔ∏è **PASSO 4: CONFIGURAR SISTEMA**### **4.1 Configurar Arquivo de Configura√ß√£o**```bash# Copiar arquivo de configura√ß√£osudo cp api/config.php api/config.php.backup# Editar configura√ß√£osudo nano api/config.php```### **4.2 Configura√ß√µes Obrigat√≥rias**```php<?php// Configura√ß√µes do Banco de Dadosdefine('DB_HOST', 'localhost');define('DB_NAME', 'helpdesk_titanium');define('DB_USER', 'helpdesk_user');define('DB_PASS', 'SuaSenhaForte123!'); // ALTERE ESTA SENHA!// Configura√ß√µes JWTdefine('JWT_SECRET', 'sua_chave_jwt_super_secreta_aqui_123456789'); // ALTERE ESTA CHAVE!// Configura√ß√µes do Sistemadefine('SYSTEM_URL', 'https://seu-dominio.com');define('SYSTEM_EMAIL', 'noreply@seu-dominio.com');// Configura√ß√µes SMTP (opcional)define('SMTP_HOST', 'smtp.gmail.com');define('SMTP_PORT', 587);define('SMTP_USERNAME', 'seu-email@gmail.com');define('SMTP_PASSWORD', 'sua-senha-app');define('SMTP_FROM_EMAIL', 'noreply@seu-dominio.com');define('SMTP_FROM_NAME', 'Sistema Help Desk Controll IT');// Configura√ß√µes de Uploaddefine('UPLOAD_MAX_SIZE', 10485760); // 10MBdefine('UPLOAD_ALLOWED_TYPES', 'jpg,jpeg,png,gif,pdf,doc,docx,txt');// Configura√ß√µes de Logdefine('LOG_LEVEL', 'INFO');define('LOG_FILE', '/var/www/html/helpdesk/logs/error.log');?>```### **4.3 Gerar Chave JWT Segura**```bash# Gerar chave JWT aleat√≥riaopenssl rand -base64 32# Ou usar este comando PHPphp -r "echo base64_encode(random_bytes(32));"```---## üåê **PASSO 5: CONFIGURAR VIRTUAL HOST**### **5.1 Criar Virtual Host**```bash# Criar arquivo de configura√ß√£osudo nano /etc/apache2/sites-available/helpdesk.conf```### **5.2 Configura√ß√£o do Virtual Host**```apache<VirtualHost *:80>    ServerName seu-dominio.com    ServerAlias www.seu-dominio.com    DocumentRoot /var/www/html/helpdesk        <Directory /var/www/html/helpdesk>        AllowOverride All        Require all granted        Options -Indexes    </Directory>        # Configura√ß√µes de seguran√ßa    ServerTokens Prod    ServerSignature Off        # Logs    ErrorLog ${APACHE_LOG_DIR}/helpdesk_error.log    CustomLog ${APACHE_LOG_DIR}/helpdesk_access.log combined        # Redirecionar para HTTPS    RewriteEngine On    RewriteCond %{HTTPS} off    RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]</VirtualHost><VirtualHost *:443>    ServerName seu-dominio.com    ServerAlias www.seu-dominio.com    DocumentRoot /var/www/html/helpdesk        <Directory /var/www/html/helpdesk>        AllowOverride All        Require all granted        Options -Indexes    </Directory>        # Configura√ß√µes SSL    SSLEngine on    SSLCertificateFile /etc/letsencrypt/live/seu-dominio.com/fullchain.pem    SSLCertificateKeyFile /etc/letsencrypt/live/seu-dominio.com/privkey.pem        # Configura√ß√µes de seguran√ßa    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"    Header always set X-Content-Type-Options nosniff    Header always set X-Frame-Options DENY    Header always set X-XSS-Protection "1; mode=block"        # Logs    ErrorLog ${APACHE_LOG_DIR}/helpdesk_ssl_error.log    CustomLog ${APACHE_LOG_DIR}/helpdesk_ssl_access.log combined</VirtualHost>```### **5.3 Ativar Site**```bash# Ativar sitesudo a2ensite helpdesk.conf# Desativar site padr√£osudo a2dissite 000-default# Recarregar Apachesudo systemctl reload apache2# Verificar configura√ß√£osudo apache2ctl configtest```---## üîí **PASSO 6: CONFIGURAR SSL (HTTPS)**### **6.1 Instalar Certbot**```bash# Instalar Certbotsudo apt install certbot python3-certbot-apache -y```### **6.2 Obter Certificado SSL**```bash# Obter certificado (substitua pelo seu dom√≠nio)sudo certbot --apache -d seu-dominio.com -d www.seu-dominio.com# Testar renova√ß√£o autom√°ticasudo certbot renew --dry-run```### **6.3 Configurar Renova√ß√£o Autom√°tica**```bash# Adicionar ao crontabsudo crontab -e# Adicionar esta linha:0 12 * * * /usr/bin/certbot renew --quiet```---## üî• **PASSO 7: CONFIGURAR FIREWALL**### **7.1 Configurar UFW**```bash# Habilitar firewallsudo ufw enable# Permitir portas necess√°riassudo ufw allow 22/tcp    # SSHsudo ufw allow 80/tcp    # HTTPsudo ufw allow 443/tcp   # HTTPS# Bloquear acesso direto ao MySQLsudo ufw deny 3306/tcp# Verificar statussudo ufw status```---## üìß **PASSO 8: CONFIGURAR EMAIL (OPCIONAL)**### **8.1 Configurar Postfix (Local)**```bash# Instalar Postfixsudo apt install postfix -y# Configurar Postfixsudo dpkg-reconfigure postfix# Configurar para usar Gmail/Outlooksudo nano /etc/postfix/sasl/sasl_passwd```### **8.2 Configura√ß√£o Gmail**```[smtp.gmail.com]:587 seu-email@gmail.com:sua-senha-app``````bash# Configurar hash de senhasudo postmap /etc/postfix/sasl/sasl_passwd# Configurar main.cfsudo nano /etc/postfix/main.cf```---## üß™ **PASSO 9: TESTAR SISTEMA**### **9.1 Teste B√°sico**```bash# Verificar se Apache est√° rodandosudo systemctl status apache2# Verificar se MySQL est√° rodandosudo systemctl status mysql# Testar PHPphp -v# Testar conex√£o com bancomysql -u helpdesk_user -p helpdesk_titanium -e "SELECT 1;"```### **9.2 Teste via Navegador**1. Acesse: `https://seu-dominio.com`2. Fa√ßa login com:   - **Usu√°rio:** admin   - **Senha:** senha1233. Teste funcionalidades:   - ‚úÖ Criar novo ticket   - ‚úÖ Visualizar tickets   - ‚úÖ Editar ticket   - ‚úÖ Gerenciar usu√°rios (admin)### **9.3 Teste da API**```bash# Testar endpoint de logincurl -X POST https://seu-dominio.com/api/auth.php?action=login \  -H "Content-Type: application/json" \  -d '{"username":"admin","password":"senha123"}'# Testar endpoint de ticketscurl -X GET https://seu-dominio.com/api/tickets.php \  -H "Authorization: Bearer SEU_TOKEN_AQUI"```---## üìä **PASSO 10: CONFIGURAR BACKUP**### **10.1 Script de Backup**```bash# Criar script de backupsudo nano /usr/local/bin/helpdesk-backup.sh``````bash#!/bin/bashDATE=$(date +%Y%m%d_%H%M%S)BACKUP_DIR="/backup/helpdesk"DB_NAME="helpdesk_titanium"DB_USER="helpdesk_user"DB_PASS="SuaSenhaForte123!"# Criar diret√≥rio de backupmkdir -p $BACKUP_DIR# Backup do banco de dadosmysqldump -u $DB_USER -p$DB_PASS $DB_NAME > $BACKUP_DIR/db_$DATE.sql# Backup dos arquivostar -czf $BACKUP_DIR/files_$DATE.tar.gz /var/www/html/helpdesk# Limpar backups antigos (manter 30 dias)find $BACKUP_DIR -name "*.sql" -mtime +30 -deletefind $BACKUP_DIR -name "*.tar.gz" -mtime +30 -deleteecho "Backup completed: $DATE"```### **10.2 Configurar Backup Autom√°tico**```bash# Tornar script execut√°velsudo chmod +x /usr/local/bin/helpdesk-backup.sh# Testar scriptsudo /usr/local/bin/helpdesk-backup.sh# Configurar cron (backup di√°rio √†s 2h)sudo crontab -e# Adicionar linha:0 2 * * * /usr/local/bin/helpdesk-backup.sh```---## üîç **PASSO 11: MONITORAMENTO**### **11.1 Configurar Logs**```bash# Configurar logrotatesudo nano /etc/logrotate.d/helpdesk``````/var/www/html/helpdesk/logs/*.log {    daily    missingok    rotate 30    compress    delaycompress    notifempty    create 644 www-data www-data}```### **11.2 Monitoramento B√°sico**```bash# Verificar logs em tempo realsudo tail -f /var/log/apache2/helpdesk_error.log# Verificar uso de recursoshtop# Verificar espa√ßo em discodf -h# Verificar uso de mem√≥riafree -h```---## üö® **SOLU√á√ÉO DE PROBLEMAS**### **Problema: Erro 500**```bash# Verificar logssudo tail -f /var/log/apache2/error.log# Verificar permiss√µessudo chown -R www-data:www-data /var/www/html/helpdesksudo chmod -R 755 /var/www/html/helpdesk# Verificar configura√ß√£o PHPsudo nano /etc/php/8.0/apache2/php.ini```### **Problema: Erro de Banco de Dados**```bash# Testar conex√£omysql -u helpdesk_user -p helpdesk_titanium# Verificar configura√ß√£onano api/config.php# Verificar se banco existemysql -u root -p -e "SHOW DATABASES;"```### **Problema: Erro de Permiss√£o**```bash# Corrigir permiss√µessudo chown -R www-data:www-data /var/www/html/helpdesksudo chmod -R 755 /var/www/html/helpdesksudo chmod -R 777 /var/www/html/helpdesk/uploadssudo chmod -R 777 /var/www/html/helpdesk/logs```---## ‚úÖ **CHECKLIST FINAL**- [ ] Servidor configurado (Apache, PHP, MySQL)- [ ] Banco de dados criado e populado- [ ] Arquivos do sistema copiados- [ ] Permiss√µes configuradas- [ ] Virtual host configurado- [ ] SSL configurado (HTTPS)- [ ] Firewall configurado- [ ] Backup autom√°tico configurado- [ ] Testes realizados- [ ] Logs configurados- [ ] Monitoramento ativo---## üìû **SUPORTE T√âCNICO**### **Arquivos Importantes:**- `api/config.php` - Configura√ß√µes principais- `database/database_schema.sql` - Estrutura do banco- `deployment/DEPLOYMENT_GUIDE.md` - Guia detalhado- `docs/production/PRODUCTION_CHECKLIST.md` - Checklist de produ√ß√£o### **Comandos √öteis:**```bash# Status dos servi√ßossudo systemctl status apache2 mysql# Reiniciar servi√ßossudo systemctl restart apache2 mysql# Verificar configura√ß√£o Apachesudo apache2ctl configtest# Verificar logssudo tail -f /var/log/apache2/helpdesk_error.log```---## üéâ **SISTEMA PRONTO!**Ap√≥s seguir todos os passos, seu sistema estar√° rodando em:- **URL:** https://seu-dominio.com- **Admin:** admin / senha123- **Suporte:** suporte / senha123- **Usu√°rio:** usuario / senha123**‚ö†Ô∏è IMPORTANTE:** Altere as credenciais padr√£o antes de colocar em produ√ß√£o!---**Desenvolvido com ‚ù§Ô∏è pela Controll IT Engineering Technology**