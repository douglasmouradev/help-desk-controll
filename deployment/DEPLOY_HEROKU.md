# 🚀 Guia Completo para Deploy no Heroku## ✅ Por que Heroku é a Melhor Opção?- ✅ **Suporte nativo a PHP**- ✅ **Banco PostgreSQL incluído**- ✅ **Uploads funcionam**- ✅ **Sessões funcionam**- ✅ **Deploy simples**- ✅ **Escalabilidade automática**---## 📋 Pré-requisitos### 1. Instalar Heroku CLI```bash# Windows (usando Chocolatey)choco install heroku-cli# macOS (usando Homebrew)brew tap heroku/brew && brew install heroku# Linuxcurl https://cli-assets.heroku.com/install.sh | sh```### 2. Instalar Git```bash# Verificar se Git está instaladogit --version```### 3. Conta no Heroku- Criar conta em [heroku.com](https://heroku.com)- Verificar email---## 🚀 Passo a Passo do Deploy### 1. **Preparar o Projeto**```bash# Navegar para o diretório do projetocd "C:\Users\Lab Douglas\Desktop\sistema web Controll IT"# Inicializar Git (se não estiver)git init# Adicionar todos os arquivosgit add .# Fazer commit inicialgit commit -m "Initial commit - Controll IT Help Desk"```### 2. **Configurar Heroku**```bash# Login no Herokuheroku login# Criar aplicaçãoheroku create Controll IT-helpdesk# Verificar se foi criadaheroku apps```### 3. **Configurar Banco de Dados**```bash# Adicionar PostgreSQL (gratuito)heroku addons:create heroku-postgresql:hobby-dev# Verificar configuraçãoheroku config```### 4. **Configurar Variáveis de Ambiente**```bash# Configurar JWT Secretheroku config:set JWT_SECRET="sua_chave_secreta_muito_segura_aqui"# Configurar modo debug (opcional)heroku config:set DEBUG_MODE="false"heroku config:set SHOW_ERRORS="false"```### 5. **Preparar Arquivos para Heroku**```bash# Copiar configuração do Herokucopy api\config-heroku.php api\config.php# Verificar se os arquivos estão corretosdir```### 6. **Deploy**```bash# Deploy para Herokugit push heroku main# Verificar logsheroku logs --tail```### 7. **Configurar Banco de Dados**```bash# Conectar ao banco e executar schemaheroku pg:psql < database_schema_postgresql.sql# Ou executar manualmenteheroku pg:psql```---## 🔧 Configuração Detalhada### 1. **Estrutura de Arquivos**```sistema-web-Controll IT/├── Procfile├── composer.json├── index.html├── styles.css├── script.js├── api/│   ├── config.php (copiado de config-heroku.php)│   ├── auth.php│   ├── tickets.php│   └── users.php└── database_schema_postgresql.sql```### 2. **Variáveis de Ambiente**```bash# Configurar todas as variáveisheroku config:set JWT_SECRET="sua_chave_secreta"heroku config:set DEBUG_MODE="false"heroku config:set SHOW_ERRORS="false"```### 3. **Banco de Dados**- **Tipo**: PostgreSQL (incluído no Heroku)- **Plano**: Hobby Dev (gratuito)- **Limite**: 10.000 linhas- **Backup**: Automático---## 🗄️ Configuração do Banco de Dados### 1. **Executar Schema**```bash# Conectar ao bancoheroku pg:psql# Executar schema\i database_schema_postgresql.sql```### 2. **Verificar Tabelas**```sql-- Listar tabelas\dt-- Verificar usuáriosSELECT * FROM users;-- Verificar ticketsSELECT * FROM tickets;```### 3. **Dados de Teste**```sql-- Inserir usuário adminINSERT INTO users (name, email, username, password_hash, user_type) VALUES('Administrador', 'admin@controllit.com.br', 'admin', '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'admin');-- Inserir usuário de suporteINSERT INTO users (name, email, username, password_hash, user_type) VALUES('Agente de Suporte', 'suporte@controllit.com.br', 'suporte', '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'support');```---## 🧪 Testes Pós-Deploy### 1. **Verificar Aplicação**```bash# Abrir aplicaçãoheroku open# Verificar logsheroku logs --tail```### 2. **Testar API**```bash# Testar health checkcurl https://Controll IT-helpdesk.herokuapp.com/api/health.php# Testar autenticaçãocurl -X POST https://Controll IT-helpdesk.herokuapp.com/api/auth.php?action=login \  -H "Content-Type: application/json" \  -d '{"username":"admin","password":"admin123"}'```### 3. **Testar Frontend**- Acessar: `https://Controll IT-helpdesk.herokuapp.com`- Fazer login com: `admin` / `admin123`- Testar todas as funcionalidades---## 🔧 Comandos Úteis do Heroku### **Gerenciamento da Aplicação**```bash# Ver statusheroku ps# Reiniciar aplicaçãoheroku restart# Ver logsheroku logs --tail# Abrir aplicaçãoheroku open```### **Banco de Dados**```bash# Conectar ao bancoheroku pg:psql# Backup do bancoheroku pg:backups:capture# Restaurar backupheroku pg:backups:restore# Ver informações do bancoheroku pg:info```### **Configuração**```bash# Ver variáveis de ambienteheroku config# Adicionar variávelheroku config:set VARIAVEL="valor"# Remover variávelheroku config:unset VARIAVEL```---## 🚨 Solução de Problemas### **Erro de Deploy**```bash# Ver logs detalhadosheroku logs --tail# Verificar buildheroku logs --source app```### **Erro de Banco de Dados**```bash# Verificar conexãoheroku pg:psql# Verificar tabelas\dt```### **Erro de Permissões**```bash# Verificar arquivosgit status# Adicionar arquivosgit add .git commit -m "Fix permissions"git push heroku main```---## 📊 Monitoramento### **Métricas**```bash# Ver métricasheroku metrics# Ver uso de recursosheroku ps:scale web=1```### **Logs**```bash# Ver logs em tempo realheroku logs --tail# Filtrar logsheroku logs --source appheroku logs --source heroku```---## 💰 Custos### **Plano Gratuito (Hobby)**- ✅ **Aplicação**: Gratuita- ✅ **Banco**: PostgreSQL Hobby Dev (gratuito)- ✅ **Tráfego**: Ilimitado- ✅ **Domínio**: `app.herokuapp.com`- ❌ **SSL**: Não incluído- ❌ **Backup**: Manual### **Plano Pago (Basic)**- 💰 **$7/mês** por dyno- ✅ **SSL**: Incluído- ✅ **Backup**: Automático- ✅ **Domínio personalizado**---## 🎯 Próximos Passos### **1. Deploy Inicial**- [ ] Configurar Heroku CLI- [ ] Criar aplicação- [ ] Configurar banco- [ ] Fazer deploy- [ ] Testar sistema### **2. Configuração Avançada**- [ ] Configurar domínio personalizado- [ ] Configurar SSL- [ ] Configurar backup automático- [ ] Configurar monitoramento### **3. Produção**- [ ] Configurar variáveis de ambiente- [ ] Configurar banco de produção- [ ] Testar todas as funcionalidades- [ ] Configurar backup---## 🚀 Deploy Rápido (Resumo)```bash# 1. Preparargit initgit add .git commit -m "Initial commit"# 2. Herokuheroku loginheroku create Controll IT-helpdeskheroku addons:create heroku-postgresql:hobby-dev# 3. Configurarcopy api\config-heroku.php api\config.phpheroku config:set JWT_SECRET="sua_chave_secreta"# 4. Deploygit push heroku main# 5. Bancoheroku pg:psql < database_schema_postgresql.sql# 6. Testarheroku open```---## 📞 SuporteSe encontrar problemas:1. **Verificar logs**: `heroku logs --tail`2. **Verificar banco**: `heroku pg:psql`3. **Reiniciar app**: `heroku restart`4. **Verificar config**: `heroku config`**Seu sistema estará rodando em**: `https://Controll IT-helpdesk.herokuapp.com` 🎉