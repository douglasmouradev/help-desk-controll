# ðŸš€ Guia Completo para Deploy no Heroku## âœ… Por que Heroku Ã© a Melhor OpÃ§Ã£o?- âœ… **Suporte nativo a PHP**- âœ… **Banco PostgreSQL incluÃ­do**- âœ… **Uploads funcionam**- âœ… **SessÃµes funcionam**- âœ… **Deploy simples**- âœ… **Escalabilidade automÃ¡tica**---## ðŸ“‹ PrÃ©-requisitos### 1. Instalar Heroku CLI```bash# Windows (usando Chocolatey)choco install heroku-cli# macOS (usando Homebrew)brew tap heroku/brew && brew install heroku# Linuxcurl https://cli-assets.heroku.com/install.sh | sh```### 2. Instalar Git```bash# Verificar se Git estÃ¡ instaladogit --version```### 3. Conta no Heroku- Criar conta em [heroku.com](https://heroku.com)- Verificar email---## ðŸš€ Passo a Passo do Deploy### 1. **Preparar o Projeto**```bash# Navegar para o diretÃ³rio do projetocd "C:\Users\Lab Douglas\Desktop\sistema web Controll IT"# Inicializar Git (se nÃ£o estiver)git init# Adicionar todos os arquivosgit add .# Fazer commit inicialgit commit -m "Initial commit - Controll IT Help Desk"```### 2. **Configurar Heroku**```bash# Login no Herokuheroku login# Criar aplicaÃ§Ã£oheroku create Controll IT-helpdesk# Verificar se foi criadaheroku apps```### 3. **Configurar Banco de Dados**```bash# Adicionar PostgreSQL (gratuito)heroku addons:create heroku-postgresql:hobby-dev# Verificar configuraÃ§Ã£oheroku config```### 4. **Configurar VariÃ¡veis de Ambiente**```bash# Configurar JWT Secretheroku config:set JWT_SECRET="sua_chave_secreta_muito_segura_aqui"# Configurar modo debug (opcional)heroku config:set DEBUG_MODE="false"heroku config:set SHOW_ERRORS="false"```### 5. **Preparar Arquivos para Heroku**```bash# Copiar configuraÃ§Ã£o do Herokucopy api\config-heroku.php api\config.php# Verificar se os arquivos estÃ£o corretosdir```### 6. **Deploy**```bash# Deploy para Herokugit push heroku main# Verificar logsheroku logs --tail```### 7. **Configurar Banco de Dados**```bash# Conectar ao banco e executar schemaheroku pg:psql < database_schema_postgresql.sql# Ou executar manualmenteheroku pg:psql```---## ðŸ”§ ConfiguraÃ§Ã£o Detalhada### 1. **Estrutura de Arquivos**```sistema-web-Controll IT/â”œâ”€â”€ Procfileâ”œâ”€â”€ composer.jsonâ”œâ”€â”€ index.htmlâ”œâ”€â”€ styles.cssâ”œâ”€â”€ script.jsâ”œâ”€â”€ api/â”‚   â”œâ”€â”€ config.php (copiado de config-heroku.php)â”‚   â”œâ”€â”€ auth.phpâ”‚   â”œâ”€â”€ tickets.phpâ”‚   â””â”€â”€ users.phpâ””â”€â”€ database_schema_postgresql.sql```### 2. **VariÃ¡veis de Ambiente**```bash# Configurar todas as variÃ¡veisheroku config:set JWT_SECRET="sua_chave_secreta"heroku config:set DEBUG_MODE="false"heroku config:set SHOW_ERRORS="false"```### 3. **Banco de Dados**- **Tipo**: PostgreSQL (incluÃ­do no Heroku)- **Plano**: Hobby Dev (gratuito)- **Limite**: 10.000 linhas- **Backup**: AutomÃ¡tico---## ðŸ—„ï¸ ConfiguraÃ§Ã£o do Banco de Dados### 1. **Executar Schema**```bash# Conectar ao bancoheroku pg:psql# Executar schema\i database_schema_postgresql.sql```### 2. **Verificar Tabelas**```sql-- Listar tabelas\dt-- Verificar usuÃ¡riosSELECT * FROM users;-- Verificar ticketsSELECT * FROM tickets;```### 3. **Dados de Teste**```sql-- Inserir usuÃ¡rio adminINSERT INTO users (name, email, username, password_hash, user_type) VALUES('Administrador', 'admin@controllit.com.br', 'admin', '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'admin');-- Inserir usuÃ¡rio de suporteINSERT INTO users (name, email, username, password_hash, user_type) VALUES('Agente de Suporte', 'suporte@controllit.com.br', 'suporte', '$2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'support');```---## ðŸ§ª Testes PÃ³s-Deploy### 1. **Verificar AplicaÃ§Ã£o**```bash# Abrir aplicaÃ§Ã£oheroku open# Verificar logsheroku logs --tail```### 2. **Testar API**```bash# Testar health checkcurl https://Controll IT-helpdesk.herokuapp.com/api/health.php# Testar autenticaÃ§Ã£ocurl -X POST https://Controll IT-helpdesk.herokuapp.com/api/auth.php?action=login \  -H "Content-Type: application/json" \  -d '{"username":"admin","password":"admin123"}'```### 3. **Testar Frontend**- Acessar: `https://Controll IT-helpdesk.herokuapp.com`- Fazer login com: `admin` / `admin123`- Testar todas as funcionalidades---## ðŸ”§ Comandos Ãšteis do Heroku### **Gerenciamento da AplicaÃ§Ã£o**```bash# Ver statusheroku ps# Reiniciar aplicaÃ§Ã£oheroku restart# Ver logsheroku logs --tail# Abrir aplicaÃ§Ã£oheroku open```### **Banco de Dados**```bash# Conectar ao bancoheroku pg:psql# Backup do bancoheroku pg:backups:capture# Restaurar backupheroku pg:backups:restore# Ver informaÃ§Ãµes do bancoheroku pg:info```### **ConfiguraÃ§Ã£o**```bash# Ver variÃ¡veis de ambienteheroku config# Adicionar variÃ¡velheroku config:set VARIAVEL="valor"# Remover variÃ¡velheroku config:unset VARIAVEL```---## ðŸš¨ SoluÃ§Ã£o de Problemas### **Erro de Deploy**```bash# Ver logs detalhadosheroku logs --tail# Verificar buildheroku logs --source app```### **Erro de Banco de Dados**```bash# Verificar conexÃ£oheroku pg:psql# Verificar tabelas\dt```### **Erro de PermissÃµes**```bash# Verificar arquivosgit status# Adicionar arquivosgit add .git commit -m "Fix permissions"git push heroku main```---## ðŸ“Š Monitoramento### **MÃ©tricas**```bash# Ver mÃ©tricasheroku metrics# Ver uso de recursosheroku ps:scale web=1```### **Logs**```bash# Ver logs em tempo realheroku logs --tail# Filtrar logsheroku logs --source appheroku logs --source heroku```---## ðŸ’° Custos### **Plano Gratuito (Hobby)**- âœ… **AplicaÃ§Ã£o**: Gratuita- âœ… **Banco**: PostgreSQL Hobby Dev (gratuito)- âœ… **TrÃ¡fego**: Ilimitado- âœ… **DomÃ­nio**: `app.herokuapp.com`- âŒ **SSL**: NÃ£o incluÃ­do- âŒ **Backup**: Manual### **Plano Pago (Basic)**- ðŸ’° **$7/mÃªs** por dyno- âœ… **SSL**: IncluÃ­do- âœ… **Backup**: AutomÃ¡tico- âœ… **DomÃ­nio personalizado**---## ðŸŽ¯ PrÃ³ximos Passos### **1. Deploy Inicial**- [ ] Configurar Heroku CLI- [ ] Criar aplicaÃ§Ã£o- [ ] Configurar banco- [ ] Fazer deploy- [ ] Testar sistema### **2. ConfiguraÃ§Ã£o AvanÃ§ada**- [ ] Configurar domÃ­nio personalizado- [ ] Configurar SSL- [ ] Configurar backup automÃ¡tico- [ ] Configurar monitoramento### **3. ProduÃ§Ã£o**- [ ] Configurar variÃ¡veis de ambiente- [ ] Configurar banco de produÃ§Ã£o- [ ] Testar todas as funcionalidades- [ ] Configurar backup---## ðŸš€ Deploy RÃ¡pido (Resumo)```bash# 1. Preparargit initgit add .git commit -m "Initial commit"# 2. Herokuheroku loginheroku create Controll IT-helpdeskheroku addons:create heroku-postgresql:hobby-dev# 3. Configurarcopy api\config-heroku.php api\config.phpheroku config:set JWT_SECRET="sua_chave_secreta"# 4. Deploygit push heroku main# 5. Bancoheroku pg:psql < database_schema_postgresql.sql# 6. Testarheroku open```---## ðŸ“ž SuporteSe encontrar problemas:1. **Verificar logs**: `heroku logs --tail`2. **Verificar banco**: `heroku pg:psql`3. **Reiniciar app**: `heroku restart`4. **Verificar config**: `heroku config`**Seu sistema estarÃ¡ rodando em**: `https://Controll IT-helpdesk.herokuapp.com` ðŸŽ‰