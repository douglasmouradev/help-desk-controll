<!DOCTYPE html><html lang="pt-BR"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Teste de Status - Perfil Suporte</title>    <link rel="stylesheet" href="styles.css">    <link rel="stylesheet" href="tickets_table.css">    <link rel="stylesheet" href="notifications.css">    <style>        body {            font-family: Arial, sans-serif;            max-width: 1200px;            margin: 0 auto;            padding: 20px;        }        .test-section {            border: 1px solid #ddd;            padding: 15px;            margin-bottom: 20px;            border-radius: 4px;        }        .log {            background-color: #f8f9fa;            padding: 15px;            border-radius: 4px;            margin-top: 20px;            font-family: monospace;            font-size: 12px;            max-height: 300px;            overflow-y: auto;            border: 1px solid #ddd;        }        .notification {            position: fixed;            top: 20px;            right: 20px;            padding: 10px 20px;            border-radius: 4px;            color: white;            z-index: 1000;        }        .notification-success {            background-color: #10b981;        }        .notification-error {            background-color: #ef4444;        }        .notification-info {            background-color: #06b6d4;        }    </style></head><body>    <h1>Teste de Funcionalidade de Status - Perfil Suporte</h1>        <div class="test-section">        <h3>Controles de Teste</h3>        <button onclick="criarTicketsTeste()">Criar Tickets de Teste</button>        <button onclick="listarTickets()">Listar Tickets</button>        <button onclick="limparDados()">Limpar Dados</button>    </div>        <div class="test-section">        <h3>Tickets do Suporte</h3>        <table class="tickets-table">            <thead>                <tr>                    <th>ID</th>                    <th>Título</th>                    <th>Usuário</th>                    <th>Status</th>                    <th>Prioridade</th>                    <th>Data</th>                    <th>Ações</th>                </tr>            </thead>            <tbody id="supportTicketsBody">                <tr>                    <td colspan="7">Nenhum ticket encontrado</td>                </tr>            </tbody>        </table>    </div>        <div class="log" id="log">        Aguardando teste...    </div>    <script>        // Simular o sistema de tickets        let tickets = [];        let users = [            { id: 1, name: 'João Silva', type: 'user' },            { id: 2, name: 'Maria Santos', type: 'user' },            { id: 3, name: 'Pedro Costa', type: 'user' }        ];        function log(message) {            const logDiv = document.getElementById('log');            const timestamp = new Date().toLocaleTimeString();            logDiv.innerHTML += `[${timestamp}] ${message}<br>`;            logDiv.scrollTop = logDiv.scrollHeight;        }        function showNotification(message, type = 'info') {            const notification = document.createElement('div');            notification.className = `notification notification-${type}`;            notification.textContent = message;                        document.body.appendChild(notification);                        setTimeout(() => {                notification.remove();            }, 3000);        }        function getStatusText(status) {            const statusMap = {                'aberto': 'Aberto',                'em_andamento': 'Em Andamento',                'fechado': 'Fechado'            };            return statusMap[status] || status;        }        function getPriorityText(priority) {            const priorityMap = {                'baixa': 'Baixa',                'media': 'Média',                'alta': 'Alta',                'critica': 'Crítica'            };            return priorityMap[priority] || priority;        }        function formatDate(dateString) {            const date = new Date(dateString);            return date.toLocaleDateString('pt-BR') + ' ' + date.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });        }        function changeTicketStatus(ticketId, newStatus) {            log(`=== ALTERANDO STATUS DO TICKET ${ticketId} ===`);            log(`Novo status: ${newStatus}`);                        const ticket = tickets.find(t => t.id === ticketId);            if (!ticket) {                log('ERRO: Ticket não encontrado');                showNotification('Ticket não encontrado!', 'error');                return;            }                        const oldStatus = ticket.status;            log(`Status anterior: ${oldStatus}`);                        // Validar status            const validStatuses = ['aberto', 'em_andamento', 'fechado'];            if (!validStatuses.includes(newStatus)) {                log('ERRO: Status inválido: ' + newStatus);                showNotification('Status inválido!', 'error');                return;            }                        // Verificar se o status já é o mesmo            if (oldStatus === newStatus) {                log('Status já é o mesmo, não alterando');                showNotification('O ticket já está com este status!', 'info');                return;            }                        // Alterar status            ticket.status = newStatus;            log(`Status alterado de ${oldStatus} para ${newStatus}`);                        // Recarregar lista de tickets            listarTickets();                        // Mostrar notificação            const statusText = getStatusText(newStatus);            showNotification(`Status alterado para: ${statusText}`, 'success');                        log('=== STATUS ALTERADO COM SUCESSO ===');        }        function viewTicket(ticketId) {            const ticket = tickets.find(t => t.id === ticketId);            if (ticket) {                log(`Visualizando ticket #${ticketId}: ${ticket.title}`);                alert(`Ticket #${ticketId}\nTítulo: ${ticket.title}\nStatus: ${getStatusText(ticket.status)}`);            }        }        function assignTicket(ticketId) {            log(`Atribuindo ticket #${ticketId}`);            showNotification('Ticket atribuído com sucesso!', 'success');        }        function loadSupportTickets() {            const tbody = document.getElementById('supportTicketsBody');                        if (tbody) {                if (tickets.length === 0) {                    tbody.innerHTML = '<tr><td colspan="7">Nenhum ticket encontrado</td></tr>';                    return;                }                tbody.innerHTML = tickets.map(ticket => {                    const user = users.find(u => u.id === ticket.userId);                    return `                        <tr>                            <td>#${ticket.id}</td>                            <td>${ticket.title}</td>                            <td>${user ? user.name : 'N/A'}</td>                            <td><span class="status-badge status-${ticket.status}">${getStatusText(ticket.status)}</span></td>                            <td><span class="priority-badge priority-${ticket.priority}">${getPriorityText(ticket.priority)}</span></td>                            <td>${formatDate(ticket.createdAt)}</td>                            <td>                                <button class="btn btn-sm btn-primary" onclick="viewTicket(${ticket.id})">Ver</button>                                <button class="btn btn-sm btn-secondary" onclick="assignTicket(${ticket.id})">Atribuir</button>                                <div class="btn-group" style="margin-top: 5px;">                                    <button class="btn btn-sm btn-success" onclick="changeTicketStatus(${ticket.id}, 'aberto')" ${ticket.status === 'aberto' ? 'disabled' : ''}>Abrir</button>                                    <button class="btn btn-sm btn-warning" onclick="changeTicketStatus(${ticket.id}, 'em_andamento')" ${ticket.status === 'em_andamento' ? 'disabled' : ''}>Em Andamento</button>                                    <button class="btn btn-sm btn-danger" onclick="changeTicketStatus(${ticket.id}, 'fechado')" ${ticket.status === 'fechado' ? 'disabled' : ''}>Fechar</button>                                </div>                            </td>                        </tr>                    `;                }).join('');            }        }        function criarTicketsTeste() {            const novosTickets = [                {                    id: tickets.length + 1,                    title: 'Problema com impressora',                    description: 'A impressora não está funcionando',                    status: 'aberto',                    priority: 'media',                    category: 'hardware',                    userId: 1,                    createdAt: new Date().toISOString()                },                {                    id: tickets.length + 2,                    title: 'Erro no sistema',                    description: 'Sistema apresentando erro',                    status: 'em_andamento',                    priority: 'alta',                    category: 'software',                    userId: 2,                    createdAt: new Date().toISOString()                },                {                    id: tickets.length + 3,                    title: 'Problema de rede',                    description: 'Internet não está funcionando',                    status: 'fechado',                    priority: 'critica',                    category: 'rede',                    userId: 3,                    createdAt: new Date().toISOString()                }            ];                        tickets.push(...novosTickets);            loadSupportTickets();            log(`Criados ${novosTickets.length} tickets de teste`);        }        function listarTickets() {            loadSupportTickets();            log(`Listando ${tickets.length} tickets`);        }        function limparDados() {            if (confirm('Tem certeza que deseja limpar todos os dados?')) {                tickets = [];                loadSupportTickets();                log('Dados limpos');            }        }        // Inicialização        document.addEventListener('DOMContentLoaded', function() {            log('Página carregada, inicializando...');            loadSupportTickets();            log('Sistema inicializado. Teste criando tickets e alterando status.');        });    </script></body></html>