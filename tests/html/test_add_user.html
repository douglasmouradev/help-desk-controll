<!DOCTYPE html><html lang="pt-BR"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Teste de Adicionar Usuário</title>    <link rel="stylesheet" href="styles.css">    <link rel="stylesheet" href="notifications.css">    <style>        body {            font-family: Arial, sans-serif;            max-width: 800px;            margin: 0 auto;            padding: 20px;        }        .test-section {            border: 1px solid #ddd;            padding: 15px;            margin-bottom: 20px;            border-radius: 4px;        }        .log {            background-color: #f8f9fa;            padding: 15px;            border-radius: 4px;            margin-top: 20px;            font-family: monospace;            font-size: 12px;            max-height: 300px;            overflow-y: auto;            border: 1px solid #ddd;        }        .notification {            position: fixed;            top: 20px;            right: 20px;            padding: 10px 20px;            border-radius: 4px;            color: white;            z-index: 1000;        }        .notification-success {            background-color: #10b981;        }        .notification-error {            background-color: #ef4444;        }        .notification-info {            background-color: #06b6d4;        }        .modal {            display: none;            position: fixed;            z-index: 1000;            left: 0;            top: 0;            width: 100%;            height: 100%;            background-color: rgba(0,0,0,0.5);        }        .modal-content {            background-color: #fefefe;            margin: 15% auto;            padding: 0;            border: none;            width: 80%;            max-width: 500px;            border-radius: 8px;            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);        }        .modal-header {            padding: 20px;            border-bottom: 1px solid #e5e7eb;            display: flex;            justify-content: space-between;            align-items: center;        }        .modal-body {            padding: 20px;        }        .close {            color: #aaa;            font-size: 28px;            font-weight: bold;            cursor: pointer;        }        .close:hover {            color: #000;        }        .form-group {            margin-bottom: 15px;        }        .form-group label {            display: block;            margin-bottom: 5px;            font-weight: bold;        }        .form-group input,        .form-group select {            width: 100%;            padding: 8px;            border: 1px solid #ddd;            border-radius: 4px;            box-sizing: border-box;        }        .btn {            display: inline-block;            padding: 10px 20px;            background-color: #007bff;            color: white;            text-decoration: none;            border: none;            border-radius: 4px;            cursor: pointer;            margin-right: 10px;        }        .btn:hover {            background-color: #0056b3;        }        .btn-primary {            background-color: #007bff;        }        .btn-secondary {            background-color: #6c757d;        }        .users-list {            margin-top: 20px;        }        .user-item {            border: 1px solid #ddd;            padding: 10px;            margin: 5px 0;            border-radius: 4px;            background-color: #f9f9f9;        }    </style></head><body>    <h1>Teste de Adicionar Usuário</h1>        <div class="test-section">        <h3>Controles de Teste</h3>        <button id="addUserBtn" class="btn btn-primary">Adicionar Usuário</button>        <button onclick="listarUsuarios()" class="btn btn-secondary">Listar Usuários</button>        <button onclick="limparUsuarios()" class="btn btn-secondary">Limpar Usuários</button>    </div>        <div class="test-section">        <h3>Usuários Cadastrados</h3>        <div id="usersList" class="users-list">            Nenhum usuário cadastrado        </div>    </div>        <div class="log" id="log">        Aguardando teste...    </div>    <!-- Modal de Adicionar Usuário -->    <div id="userModal" class="modal">        <div class="modal-content">            <div class="modal-header">                <h3 id="userModalTitle">Adicionar Usuário</h3>                <span class="close">&times;</span>            </div>            <div class="modal-body">                <form id="userForm">                    <div class="form-group">                        <label for="userName">Nome:</label>                        <input type="text" id="userName" name="name" required>                    </div>                    <div class="form-group">                        <label for="userClientName">Cliente (Sonda, Simpress, etc):</label>                        <input type="text" id="userClientName" name="client_name" placeholder="Ex: Sonda, Simpress">                    </div>                    <div class="form-group">                        <label for="userEmail">Email:</label>                        <input type="email" id="userEmail" name="email" required>                    </div>                    <div class="form-group">                        <label for="userPassword">Senha:</label>                        <input type="password" id="userPassword" name="password" required>                    </div>                    <div class="form-group">                        <label for="userType">Tipo de Usuário:</label>                        <select id="userType" name="type">                            <option value="user">Usuário Padrão</option>                            <option value="support">Suporte</option>                            <option value="admin">Administrador</option>                        </select>                    </div>                    <button type="submit" class="btn btn-primary">Salvar</button>                </form>            </div>        </div>    </div>    <script>        // Simular o sistema de usuários        let users = [            { id: 1, name: 'Admin', email: 'admin@test.com', type: 'admin', username: 'admin' },            { id: 2, name: 'Suporte', email: 'suporte@test.com', type: 'support', username: 'suporte' }        ];        function log(message) {            const logDiv = document.getElementById('log');            const timestamp = new Date().toLocaleTimeString();            logDiv.innerHTML += `[${timestamp}] ${message}<br>`;            logDiv.scrollTop = logDiv.scrollHeight;        }        function showNotification(message, type = 'info') {            const notification = document.createElement('div');            notification.className = `notification notification-${type}`;            notification.textContent = message;                        document.body.appendChild(notification);                        setTimeout(() => {                notification.remove();            }, 3000);        }        function openUserModal() {            console.log('Abrindo modal de adicionar usuário');            log('Abrindo modal de adicionar usuário');            const modal = document.getElementById('userModal');            if (modal) {                // Limpar formulário                const form = document.getElementById('userForm');                if (form) {                    form.reset();                }                                // Definir título                const title = document.getElementById('userModalTitle');                if (title) {                    title.textContent = 'Adicionar Usuário';                }                                // Mostrar modal                modal.style.display = 'block';                console.log('Modal de usuário aberto');                log('Modal de usuário aberto');            } else {                console.error('Modal de usuário não encontrado');                log('ERRO: Modal de usuário não encontrado');            }        }        function closeModal() {            const modals = document.querySelectorAll('.modal');            modals.forEach(modal => modal.style.display = 'none');            log('Modal fechado');        }        function handleAddUser(e) {            e.preventDefault();            log('=== PROCESSANDO ADIÇÃO DE USUÁRIO ===');                        const formData = new FormData(e.target);            const user = {                id: users.length + 1,                username: formData.get('name').toLowerCase().replace(/\s+/g, ''),                password: formData.get('password'),                name: formData.get('name'),                email: formData.get('email'),                type: formData.get('type'),                client_name: formData.get('client_name')            };                        log(`Dados do usuário: ${JSON.stringify(user)}`);                        // Verificar se email já existe            const existingUser = users.find(u => u.email === user.email);            if (existingUser) {                log('ERRO: Email já existe');                showNotification('Email já cadastrado!', 'error');                return;            }                        // Verificar se username já existe            const existingUsername = users.find(u => u.username === user.username);            if (existingUsername) {                log('ERRO: Username já existe');                showNotification('Nome de usuário já cadastrado!', 'error');                return;            }                        users.push(user);            log(`Usuário adicionado: ${user.name} (${user.type})`);                        e.target.reset();            closeModal();            showNotification('Usuário adicionado com sucesso!', 'success');                        // Atualizar lista            listarUsuarios();                        log('=== USUÁRIO ADICIONADO COM SUCESSO ===');        }        function listarUsuarios() {            const usersDiv = document.getElementById('usersList');                        if (users.length === 0) {                usersDiv.innerHTML = 'Nenhum usuário cadastrado';                return;            }                        usersDiv.innerHTML = users.map(user => `                <div class="user-item">                    <strong>${user.name}</strong> (${user.username})<br>                    <small>Email: ${user.email} | Tipo: ${user.type} | ID: ${user.id}</small>                </div>            `).join('');                        log(`Listados ${users.length} usuários`);        }        function limparUsuarios() {            if (confirm('Tem certeza que deseja limpar todos os usuários?')) {                users = [];                listarUsuarios();                log('Usuários limpos');            }        }        // Event listeners        document.addEventListener('DOMContentLoaded', function() {            log('Página carregada, configurando listeners...');                        // Botão adicionar usuário            const addUserBtn = document.getElementById('addUserBtn');            if (addUserBtn) {                addUserBtn.addEventListener('click', function() {                    log('Botão Adicionar Usuário clicado');                    openUserModal();                });                log('Listener do botão Adicionar Usuário configurado');            } else {                log('ERRO: Botão Adicionar Usuário não encontrado');            }                        // Formulário de usuário            const userForm = document.getElementById('userForm');            if (userForm) {                userForm.addEventListener('submit', handleAddUser);                log('Listener do formulário de usuário configurado');            } else {                log('ERRO: Formulário de usuário não encontrado');            }                        // Botão fechar modal            const closeBtn = document.querySelector('.close');            if (closeBtn) {                closeBtn.addEventListener('click', closeModal);                log('Listener do botão fechar configurado');            }                        // Fechar modal ao clicar fora            window.addEventListener('click', function(event) {                const modal = document.getElementById('userModal');                if (event.target === modal) {                    closeModal();                }            });                        // Listar usuários iniciais            listarUsuarios();                        log('Configuração concluída');        });    </script></body></html>