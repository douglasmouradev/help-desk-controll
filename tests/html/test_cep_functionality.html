<!DOCTYPE html><html lang="pt-BR"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Teste de Funcionalidade CEP</title>    <style>        body {            font-family: Arial, sans-serif;            max-width: 800px;            margin: 0 auto;            padding: 20px;        }        .form-group {            margin-bottom: 15px;        }        label {            display: block;            margin-bottom: 5px;            font-weight: bold;        }        input {            width: 100%;            padding: 8px;            border: 1px solid #ddd;            border-radius: 4px;        }        button {            background-color: #007bff;            color: white;            padding: 10px 20px;            border: none;            border-radius: 4px;            cursor: pointer;        }        button:hover {            background-color: #0056b3;        }        button:disabled {            background-color: #6c757d;            cursor: not-allowed;        }        .test-section {            border: 1px solid #ddd;            padding: 20px;            margin-bottom: 20px;            border-radius: 4px;        }        .test-section h3 {            margin-top: 0;            color: #333;        }        .instructions {            background-color: #f8f9fa;            padding: 15px;            border-radius: 4px;            margin-bottom: 20px;        }    </style></head><body>    <h1>Teste de Funcionalidade CEP</h1>        <div class="instructions">        <h3>Instruções de Teste:</h3>        <ol>            <li>Digite um CEP válido (8 dígitos) no campo abaixo</li>            <li>O CEP deve ser formatado automaticamente (00000-000)</li>            <li>Quando completar 8 dígitos, a busca deve ser feita automaticamente</li>            <li>Os campos de endereço, cidade e estado devem ser preenchidos automaticamente</li>            <li>Teste também o botão "Buscar CEP" manualmente</li>        </ol>    </div>    <div class="test-section">        <h3>Formulário de Teste CEP</h3>        <form id="testForm">            <div class="form-group">                <label for="zipcode">CEP:</label>                <input type="text" id="zipcode" name="zipcode" placeholder="00000-000" maxlength="9" required>                <button type="button" id="searchCepBtn" class="btn btn-sm btn-secondary" style="margin-top: 5px;">Buscar CEP</button>            </div>            <div class="form-group">                <label for="address">Endereço Completo:</label>                <input type="text" id="address" name="address" readonly>            </div>            <div class="form-group">                <label for="city">Cidade:</label>                <input type="text" id="city" name="city" readonly>            </div>            <div class="form-group">                <label for="state">Estado (UF):</label>                <input type="text" id="state" name="state" maxlength="2" readonly>            </div>        </form>    </div>    <div class="test-section">        <h3>CEPs para Teste:</h3>        <ul>            <li><strong>01310-100</strong> - Av. Paulista, São Paulo/SP</li>            <li><strong>20040-020</strong> - Centro, Rio de Janeiro/RJ</li>            <li><strong>40070-110</strong> - Pelourinho, Salvador/BA</li>            <li><strong>80020-030</strong> - Centro, Curitiba/PR</li>            <li><strong>90020-004</strong> - Centro, Porto Alegre/RS</li>        </ul>    </div>    <div class="test-section">        <h3>Log de Debug:</h3>        <div id="debugLog" style="background-color: #f8f9fa; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto;">            Aguardando teste...        </div>    </div>    <script>        // Função para adicionar log        function addLog(message) {            const log = document.getElementById('debugLog');            const timestamp = new Date().toLocaleTimeString();            log.innerHTML += `[${timestamp}] ${message}<br>`;            log.scrollTop = log.scrollHeight;        }        // Função de busca de CEP (copiada do script.js)        async function searchCep() {            addLog('Iniciando busca de CEP...');                        const zipcodeInput = document.getElementById('zipcode');            if (!zipcodeInput) {                addLog('ERRO: Campo de CEP não encontrado');                alert('Erro: Campo de CEP não encontrado. Recarregue a página.');                return;            }                        const zipcode = zipcodeInput.value.replace(/\D/g, '');            addLog(`CEP digitado: ${zipcode}`);                        if (zipcode.length !== 8) {                addLog('ERRO: CEP deve conter 8 dígitos');                alert('CEP deve conter 8 dígitos');                return;            }                        // Mostrar feedback de carregamento            const searchBtn = document.getElementById('searchCepBtn');            const originalText = searchBtn ? searchBtn.textContent : '';            if (searchBtn) {                searchBtn.textContent = 'Buscando...';                searchBtn.disabled = true;            }                        try {                addLog('Fazendo requisição para ViaCEP...');                const url = `https://viacep.com.br/ws/${zipcode}/json/`;                addLog(`URL: ${url}`);                                const response = await fetch(url);                addLog(`Resposta recebida: ${response.status}`);                                if (!response.ok) {                    throw new Error(`Erro HTTP: ${response.status}`);                }                                const data = await response.json();                addLog(`Dados do CEP: ${JSON.stringify(data)}`);                                if (data.erro) {                    addLog('ERRO: CEP não encontrado');                    alert('CEP não encontrado. Verifique se o CEP está correto.');                    if (searchBtn) {                        searchBtn.textContent = originalText;                        searchBtn.disabled = false;                    }                    return;                }                                // Preencher campos de endereço                const addressInput = document.getElementById('address');                const cityInput = document.getElementById('city');                const stateInput = document.getElementById('state');                                addLog('Preenchendo campos de endereço...');                                if (addressInput) {                    let endereco = data.logradouro || '';                    if (data.complemento) {                        endereco += ', ' + data.complemento;                    }                    if (data.bairro) {                        endereco += ' - ' + data.bairro;                    }                    addressInput.value = endereco.trim();                    addLog(`Endereço preenchido: ${addressInput.value}`);                } else {                    addLog('ERRO: Campo de endereço não encontrado');                }                                if (cityInput) {                    cityInput.value = data.localidade || '';                    addLog(`Cidade preenchida: ${cityInput.value}`);                } else {                    addLog('ERRO: Campo de cidade não encontrado');                }                                if (stateInput) {                    stateInput.value = data.uf || '';                    addLog(`Estado preenchido: ${stateInput.value}`);                } else {                    addLog('ERRO: Campo de estado não encontrado');                }                                addLog('SUCESSO: CEP encontrado e campos preenchidos!');                            } catch (error) {                addLog(`ERRO: ${error.message}`);                console.error('Erro ao buscar CEP:', error);                alert('Erro ao buscar CEP. Verifique sua conexão com a internet.\n\nDetalhes: ' + error.message);            } finally {                // Restaurar botão                if (searchBtn) {                    searchBtn.textContent = originalText;                    searchBtn.disabled = false;                }            }        }        // Event listeners        document.addEventListener('DOMContentLoaded', function() {            addLog('Página carregada, configurando listeners...');                        // Botão buscar CEP            const searchCepBtn = document.getElementById('searchCepBtn');            if (searchCepBtn) {                searchCepBtn.addEventListener('click', function(e) {                    e.preventDefault();                    addLog('Botão buscar CEP clicado');                    searchCep();                });                addLog('Listener do botão buscar CEP configurado');            }                        // Campo CEP com formatação automática            const zipcodeInput = document.getElementById('zipcode');            if (zipcodeInput) {                zipcodeInput.addEventListener('input', function(e) {                    let value = e.target.value.replace(/\D/g, '');                    if (value.length <= 8) {                        // Formatar CEP apenas quando tiver 5 ou mais dígitos                        if (value.length >= 5) {                            e.target.value = value.replace(/(\d{5})(\d{0,3})/, '$1-$2');                        } else {                            e.target.value = value;                        }                                                addLog(`CEP formatado: ${e.target.value}`);                                                // Buscar automaticamente quando tiver 8 dígitos                        if (value.length === 8) {                            addLog('CEP completo detectado, buscando automaticamente...');                            setTimeout(() => searchCep(), 500);                        }                    }                });                addLog('Listener do campo CEP configurado');            }                        addLog('Configuração concluída. Teste digitando um CEP válido.');        });    </script></body></html>