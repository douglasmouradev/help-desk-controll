<?php// Script para listar todos os tickets do bancoerror_reporting(E_ALL);ini_set('display_errors', 1);echo "<h1>üìã Lista de Tickets no Banco de Dados</h1>";try {    // Conectar ao banco    $pdo = new PDO('mysql:host=localhost;dbname=helpdesk_titanium', 'root', '');    echo "‚úÖ Conex√£o com banco: OK<br><br>";        // Listar todos os tickets    $stmt = $pdo->query("        SELECT             t.id,            t.title,            t.description,            t.status,            t.priority,            t.category,            t.created_at,            t.updated_at,            u.name as user_name,            u.email as user_email,            u.username as user_username        FROM tickets t        LEFT JOIN users u ON t.user_id = u.id        ORDER BY t.created_at DESC    ");        $tickets = $stmt->fetchAll(PDO::FETCH_ASSOC);        echo "<h2>üìä Resumo:</h2>";    echo "Total de tickets: <strong>" . count($tickets) . "</strong><br><br>";        if (count($tickets) > 0) {        echo "<h2>üé´ Lista de Tickets:</h2>";        echo "<table border='1' style='border-collapse: collapse; width: 100%;'>";        echo "<tr style='background: #f0f0f0;'>";        echo "<th style='padding: 10px;'>ID</th>";        echo "<th style='padding: 10px;'>T√≠tulo</th>";        echo "<th style='padding: 10px;'>Status</th>";        echo "<th style='padding: 10px;'>Prioridade</th>";        echo "<th style='padding: 10px;'>Categoria</th>";        echo "<th style='padding: 10px;'>Usu√°rio</th>";        echo "<th style='padding: 10px;'>Data Cria√ß√£o</th>";        echo "<th style='padding: 10px;'>Descri√ß√£o</th>";        echo "</tr>";                foreach ($tickets as $ticket) {            $statusColor = '';            switch($ticket['status']) {                case 'open': $statusColor = 'background: #fef3c7; color: #92400e;'; break;                case 'in_progress': $statusColor = 'background: #dbeafe; color: #1e40af;'; break;                case 'resolved': $statusColor = 'background: #d1fae5; color: #065f46;'; break;                case 'closed': $statusColor = 'background: #f3f4f6; color: #374151;'; break;            }                        $priorityColor = '';            switch($ticket['priority']) {                case 'low': $priorityColor = 'background: #d1fae5; color: #065f46;'; break;                case 'medium': $priorityColor = 'background: #fef3c7; color: #92400e;'; break;                case 'high': $priorityColor = 'background: #fed7d7; color: #c53030;'; break;                case 'urgent': $priorityColor = 'background: #fecaca; color: #dc2626;'; break;            }                        echo "<tr>";            echo "<td style='padding: 8px; text-align: center;'><strong>#" . $ticket['id'] . "</strong></td>";            echo "<td style='padding: 8px;'><strong>" . htmlspecialchars($ticket['title']) . "</strong></td>";            echo "<td style='padding: 8px; text-align: center;'><span style='padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: bold; $statusColor'>" . strtoupper($ticket['status']) . "</span></td>";            echo "<td style='padding: 8px; text-align: center;'><span style='padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: bold; $priorityColor'>" . strtoupper($ticket['priority']) . "</span></td>";            echo "<td style='padding: 8px;'>" . htmlspecialchars($ticket['category']) . "</td>";            echo "<td style='padding: 8px;'>" . htmlspecialchars($ticket['user_name'] . ' (' . $ticket['user_username'] . ')') . "</td>";            echo "<td style='padding: 8px;'>" . date('d/m/Y H:i', strtotime($ticket['created_at'])) . "</td>";            echo "<td style='padding: 8px; max-width: 200px;'>" . htmlspecialchars(substr($ticket['description'], 0, 100)) . (strlen($ticket['description']) > 100 ? '...' : '') . "</td>";            echo "</tr>";        }                echo "</table>";                echo "<h2>üìà Estat√≠sticas:</h2>";        $stats = [            'open' => 0,            'in_progress' => 0,            'resolved' => 0,            'closed' => 0        ];                foreach ($tickets as $ticket) {            $stats[$ticket['status']]++;        }                echo "<ul>";        echo "<li><strong>Abertos:</strong> " . $stats['open'] . "</li>";        echo "<li><strong>Em Andamento:</strong> " . $stats['in_progress'] . "</li>";        echo "<li><strong>Resolvidos:</strong> " . $stats['resolved'] . "</li>";        echo "<li><strong>Fechados:</strong> " . $stats['closed'] . "</li>";        echo "</ul>";            } else {        echo "<h2>‚ùå Nenhum ticket encontrado!</h2>";        echo "<p>N√£o h√° tickets no banco de dados.</p>";    }    } catch (PDOException $e) {    echo "‚ùå Erro na conex√£o: " . $e->getMessage() . "<br>";}echo "<hr>";echo "<h2>üîß Pr√≥ximos Passos:</h2>";echo "<ol>";echo "<li>Se h√° tickets no banco mas n√£o aparecem na interface, o problema est√° no JavaScript</li>";echo "<li>Se n√£o h√° tickets, crie alguns atrav√©s da interface</li>";echo "<li>Verifique o console do navegador para erros</li>";echo "</ol>";echo "<p><strong>Teste:</strong> <a href='http://localhost/sistema-web-Controll IT/'>Sistema Principal</a></p>";?>