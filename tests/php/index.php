<?php// Sistema Help Desk Controll IT - Página principal// Verificar se é uma requisição para um arquivo PHP específico$request_uri = $_SERVER['REQUEST_URI'];$path = parse_url($request_uri, PHP_URL_PATH);// Permitir acesso direto a arquivos PHP específicosif (preg_match('/\.php$/', $path)) {    $file_path = ltrim($path, '/');    if (file_exists($file_path)) {        include $file_path;        exit;    }}// Se for setup_database_heroku.php, incluir diretamenteif ($path === '/setup_database_heroku.php') {    include 'setup_database_heroku.php';    exit;}?><!DOCTYPE html><html lang="pt-BR"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Controll IT Help Desk</title>    <link rel="stylesheet" href="styles.css">    <link rel="stylesheet" href="tickets_table.css">    <link rel="icon" type="image/svg+xml" href="favicon.svg">    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"></head><body>    <!-- Header com Logo -->    <header class="header">        <div class="container">            <div class="logo">                <svg width="60" height="60" viewBox="0 0 60 60" class="logo-icon">                    <defs>                        <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">                            <stop offset="0%" style="stop-color:#1e3a8a;stop-opacity:1" />                            <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />                        </linearGradient>                    </defs>                    <path d="M30 5 L50 20 L45 45 L15 45 L10 20 Z" fill="url(#grad1)"/>                    <path d="M30 5 L25 25 L35 25 Z" fill="#64748b"/>                    <path d="M25 25 L20 40 L30 40 L35 25 Z" fill="#475569"/>                </svg>                <div class="logo-text">                    <h1>Controll IT</h1>                    <p>Engineering Technology</p>                </div>            </div>            <nav class="nav">                <div class="nav-toggle" id="navToggle">                    <span></span>                    <span></span>                    <span></span>                </div>                <ul class="nav-menu" id="navMenu">                    <li><a href="#" class="nav-link active" data-page="login">Login</a></li>                </ul>            </nav>        </div>    </header>    <!-- Main Content -->    <main class="main">        <!-- Login Page -->        <div id="loginPage" class="page active">            <div class="login-container">                <div class="login-card">                    <div class="login-header">                        <h2>Sistema de Help Desk</h2>                        <p>Acesso ao sistema de chamados</p>                        <div class="login-info">                            <p><i class="fas fa-shield-alt"></i> Sistema seguro e confiável</p>                        </div>                    </div>                    <form id="loginForm" class="login-form">                        <div class="form-group">                            <label for="username">Usuário:</label>                            <input type="text" id="username" name="username" required>                        </div>                        <div class="form-group">                            <label for="password">Senha:</label>                            <input type="password" id="password" name="password" required>                        </div>                        <button type="submit" class="btn btn-primary">Entrar</button>                        <div class="login-options">                            <a href="#" id="forgotPasswordLink" class="forgot-password">Esqueceu sua senha?</a>                        </div>                    </form>                </div>            </div>        </div>        <!-- Dashboard Pages -->        <div id="userDashboard" class="page">            <div class="dashboard-container">                <div class="dashboard-header">                    <h2>Dashboard - Usuário</h2>                    <div class="user-info">                        <span id="userName">Usuário</span>                        <button id="logoutBtn" class="btn btn-secondary">Sair</button>                    </div>                </div>                                <div class="dashboard-content">                    <div class="stats-cards">                        <div class="stat-card">                            <i class="fas fa-ticket-alt"></i>                            <h3 id="userOpenTickets">0</h3>                            <p>Chamados Abertos</p>                        </div>                        <div class="stat-card">                            <i class="fas fa-clock"></i>                            <h3 id="userPendingTickets">0</h3>                            <p>Em Andamento</p>                        </div>                        <div class="stat-card">                            <i class="fas fa-check-circle"></i>                            <h3 id="userClosedTickets">0</h3>                            <p>Finalizados</p>                        </div>                    </div>                    <div class="dashboard-section">                        <div class="section-header">                            <h3>Novo Chamado</h3>                        </div>                        <form id="newTicketForm" class="ticket-form">                            <div class="form-row">                                <div class="form-group">                                    <label for="ticketTitle">Título:</label>                                    <input type="text" id="ticketTitle" name="title" required>                                </div>                                <div class="form-group">                                    <label for="ticketPriority">Prioridade:</label>                                    <select id="ticketPriority" name="priority">                                        <option value="baixa">Baixa</option>                                        <option value="media" selected>Média</option>                                        <option value="alta">Alta</option>                                        <option value="critica">Crítica</option>                                    </select>                                </div>                            </div>                            <div class="form-group">                                <label for="ticketCategory">Categoria:</label>                                <select id="ticketCategory" name="category">                                    <option value="hardware">Hardware</option>                                    <option value="software">Software</option>                                    <option value="rede">Rede</option>                                    <option value="email">E-mail</option>                                    <option value="outros">Outros</option>                                </select>                            </div>                            <div class="form-group">                                <label for="ticketDescription">Descrição:</label>                                <textarea id="ticketDescription" name="description" rows="4" required></textarea>                            </div>                            <button type="submit" class="btn btn-primary">Abrir Chamado</button>                        </form>                    </div>                    <div class="dashboard-section">                        <div class="section-header">                            <h3>Meus Chamados</h3>                        </div>                        <div id="userTicketsTable" class="tickets-table-container">                            <table class="tickets-table">                                <thead>                                    <tr>                                        <th>ID</th>                                        <th>Título</th>                                        <th>Status</th>                                        <th>Prioridade</th>                                        <th>Data</th>                                        <th>Ações</th>                                    </tr>                                </thead>                                <tbody id="userTicketsBody">                                    <!-- Tickets will be populated here -->                                </tbody>                            </table>                        </div>                    </div>                </div>            </div>        </div>        <!-- Support Dashboard -->        <div id="supportDashboard" class="page">            <div class="dashboard-container">                <div class="dashboard-header">                    <h2>Dashboard - Suporte</h2>                    <div class="user-info">                        <span id="supportUserName">Suporte</span>                        <button id="supportLogoutBtn" class="btn btn-secondary">Sair</button>                    </div>                </div>                                <div class="dashboard-content">                    <div class="stats-cards">                        <div class="stat-card">                            <i class="fas fa-ticket-alt"></i>                            <h3 id="supportOpenTickets">0</h3>                            <p>Abertos</p>                        </div>                        <div class="stat-card">                            <i class="fas fa-user-cog"></i>                            <h3 id="supportAssignedTickets">0</h3>                            <p>Atribuídos a Mim</p>                        </div>                        <div class="stat-card">                            <i class="fas fa-clock"></i>                            <h3 id="supportInProgressTickets">0</h3>                            <p>Em Andamento</p>                        </div>                        <div class="stat-card">                            <i class="fas fa-check-circle"></i>                            <h3 id="supportClosedTickets">0</h3>                            <p>Finalizados</p>                        </div>                    </div>                    <div class="dashboard-section">                        <div class="section-header">                            <h3>Todos os Chamados</h3>                            <div class="filter-controls">                                <select id="statusFilter">                                    <option value="">Todos os Status</option>                                    <option value="aberto">Aberto</option>                                    <option value="em_andamento">Em Andamento</option>                                    <option value="fechado">Fechado</option>                                </select>                                <select id="priorityFilter">                                    <option value="">Todas as Prioridades</option>                                    <option value="baixa">Baixa</option>                                    <option value="media">Média</option>                                    <option value="alta">Alta</option>                                    <option value="critica">Crítica</option>                                </select>                            </div>                        </div>                        <div id="supportTicketsTable" class="tickets-table-container">                            <table class="tickets-table">                                <thead>                                    <tr>                                        <th>ID</th>                                        <th>Título</th>                                        <th>Usuário</th>                                        <th>Status</th>                                        <th>Prioridade</th>                                        <th>Data</th>                                        <th>Ações</th>                                    </tr>                                </thead>                                <tbody id="supportTicketsBody">                                    <!-- Tickets will be populated here -->                                </tbody>                            </table>                        </div>                    </div>                </div>            </div>        </div>        <!-- Admin Dashboard -->        <div id="adminDashboard" class="page">            <div class="dashboard-container">                <div class="dashboard-header">                    <h2>Dashboard - Administrador</h2>                    <div class="user-info">                        <span id="adminUserName">Administrador</span>                        <button id="adminLogoutBtn" class="btn btn-secondary">Sair</button>                    </div>                </div>                                <div class="dashboard-content">                    <div class="stats-cards">                        <div class="stat-card">                            <i class="fas fa-ticket-alt"></i>                            <h3 id="adminTotalTickets">0</h3>                            <p>Total de Chamados</p>                        </div>                        <div class="stat-card">                            <i class="fas fa-users"></i>                            <h3 id="adminTotalUsers">0</h3>                            <p>Usuários</p>                        </div>                        <div class="stat-card">                            <i class="fas fa-user-cog"></i>                            <h3 id="adminSupportUsers">0</h3>                            <p>Agentes de Suporte</p>                        </div>                        <div class="stat-card">                            <i class="fas fa-chart-line"></i>                            <h3 id="adminAvgResolutionTime">0h</h3>                            <p>Tempo Médio Resolução</p>                        </div>                    </div>                    <div class="admin-tabs">                        <button class="tab-btn active" data-tab="tickets">Chamados</button>                        <button class="tab-btn" data-tab="users">Usuários</button>                        <button class="tab-btn" data-tab="reports">Relatórios</button>                    </div>                    <!-- Tickets Tab -->                    <div id="ticketsTab" class="tab-content active">                        <div class="dashboard-section">                            <div class="section-header">                                <h3>Gerenciamento de Chamados</h3>                                <div class="filter-controls">                                    <select id="adminStatusFilter">                                        <option value="">Todos os Status</option>                                        <option value="aberto">Aberto</option>                                        <option value="em_andamento">Em Andamento</option>                                        <option value="fechado">Fechado</option>                                    </select>                                    <select id="adminPriorityFilter">                                        <option value="">Todas as Prioridades</option>                                        <option value="baixa">Baixa</option>                                        <option value="media">Média</option>                                        <option value="alta">Alta</option>                                        <option value="critica">Crítica</option>                                    </select>                                    <select id="adminUserFilter">                                        <option value="">Todos os Usuários</option>                                    </select>                                </div>                            </div>                            <div id="adminTicketsTable" class="tickets-table-container">                                <table class="tickets-table">                                    <thead>                                        <tr>                                            <th>ID</th>                                            <th>Título</th>                                            <th>Usuário</th>                                            <th>Status</th>                                            <th>Prioridade</th>                                            <th>Atribuído a</th>                                            <th>Data</th>                                            <th>Ações</th>                                        </tr>                                    </thead>                                    <tbody id="adminTicketsBody">                                        <!-- Tickets will be populated here -->                                    </tbody>                                </table>                            </div>                        </div>                    </div>                    <!-- Users Tab -->                    <div id="usersTab" class="tab-content">                        <div class="dashboard-section">                            <div class="section-header">                                <h3>Gerenciamento de Usuários</h3>                                <button id="addUserBtn" class="btn btn-primary">Adicionar Usuário</button>                            </div>                            <div id="usersTable" class="tickets-table-container">                                <table class="tickets-table">                                    <thead>                                        <tr>                                            <th>ID</th>                                            <th>Nome</th>                                            <th>Email</th>                                            <th>Tipo</th>                                            <th>Status</th>                                            <th>Data Criação</th>                                            <th>Ações</th>                                        </tr>                                    </thead>                                    <tbody id="usersBody">                                        <!-- Users will be populated here -->                                    </tbody>                                </table>                            </div>                        </div>                    </div>                    <!-- Reports Tab -->                    <div id="reportsTab" class="tab-content">                        <div class="dashboard-section">                            <div class="section-header">                                <h3>Relatórios</h3>                            </div>                            <div class="reports-grid">                                <div class="report-card">                                    <h4>Chamados por Status</h4>                                    <canvas id="statusChart"></canvas>                                </div>                                <div class="report-card">                                    <h4>Chamados por Prioridade</h4>                                    <canvas id="priorityChart"></canvas>                                </div>                                <div class="report-card">                                    <h4>Performance dos Agentes</h4>                                    <canvas id="agentChart"></canvas>                                </div>                                <div class="report-card">                                    <h4>Tempo de Resolução</h4>                                    <div id="resolutionTimeStats">                                        <p>Média: <span id="avgResolution">0h</span></p>                                        <p>Mínimo: <span id="minResolution">0h</span></p>                                        <p>Máximo: <span id="maxResolution">0h</span></p>                                    </div>                                </div>                            </div>                        </div>                    </div>                </div>            </div>        </div>    </main>    <!-- Modals -->    <div id="ticketModal" class="modal">        <div class="modal-content">            <div class="modal-header">                <h3 id="modalTitle">Detalhes do Chamado</h3>                <span class="close">&times;</span>            </div>            <div class="modal-body" id="modalBody">                <!-- Ticket details will be populated here -->            </div>        </div>    </div>    <div id="userModal" class="modal">        <div class="modal-content">            <div class="modal-header">                <h3 id="userModalTitle">Adicionar Usuário</h3>                <span class="close">&times;</span>            </div>            <div class="modal-body">                <form id="userForm">                    <div class="form-group">                        <label for="userName">Nome:</label>                        <input type="text" id="userName" name="name" required>                    </div>                    <div class="form-group">                        <label for="userEmail">Email:</label>                        <input type="email" id="userEmail" name="email" required>                    </div>                    <div class="form-group">                        <label for="userPassword">Senha:</label>                        <input type="password" id="userPassword" name="password" required>                    </div>                    <div class="form-group">                        <label for="userType">Tipo de Usuário:</label>                        <select id="userType" name="type">                            <option value="user">Usuário Padrão</option>                            <option value="support">Suporte</option>                            <option value="admin">Administrador</option>                        </select>                    </div>                    <button type="submit" class="btn btn-primary">Salvar</button>                </form>            </div>        </div>    </div>    <!-- Forgot Password Modal -->    <div id="forgotPasswordModal" class="modal">        <div class="modal-content">            <div class="modal-header">                <h3>Recuperar Senha</h3>                <span class="close">&times;</span>            </div>            <div class="modal-body">                <form id="forgotPasswordForm">                    <div class="form-group">                        <label for="forgotEmail">Email:</label>                        <input type="email" id="forgotEmail" name="email" required>                    </div>                    <div class="form-group">                        <label for="forgotUsername">Usuário:</label>                        <input type="text" id="forgotUsername" name="username" required>                    </div>                    <button type="submit" class="btn btn-primary">Enviar Link de Recuperação</button>                </form>            </div>        </div>    </div>    <!-- Scripts -->    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>    <script src="script.js"></script></body></html>